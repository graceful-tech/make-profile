<div class="overlay" *ngIf="isUploading">
  <div class="spinner-container">
    <mat-spinner
      [diameter]="80"
      strokeWidth="5"
      class="custom-blue"
    ></mat-spinner>
    <p class="loading-text">
      Analysing Resume<span class="dot dot1">.</span
      ><span class="dot dot2">.</span><span class="dot dot3">.</span>
    </p>
  </div>
</div>

<div class="overlay" *ngIf="isAnalysing">
  <div class="spinner-container">
    <mat-spinner
      [diameter]="80"
      strokeWidth="5"
      class="custom-blue"
    ></mat-spinner>
    <p class="loading-text">
      Analysing Details<span class="dot dot1">.</span
      ><span class="dot dot2">.</span><span class="dot dot3">.</span>
    </p>
  </div>
</div>

<div class="profile-wrapper">

  <span style=" display:flex;justify-content: space-between;">
 <button class="home-btn" (click)="goToHome()">
    <i class="fa fa-home"></i> Go to home
  </button>

  <span class="hint-btn" (click)="hintPopup()">Hints/Tips</span>

  </span>
  

  <div class="col-12 md:col-6" style="margin: 0 auto">
    <div class="inside-label-textarea">
      <span class="btn-position">
        <span class="left-side">
          <span class="heading-content">About yourself (Intro) &nbsp;</span>
          <span class="tooltip-bubble"
            >Suggested
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
          </span>
        </span>
      </span>

      <div style="margin-top: 15px;">
      <textarea
        id="analysis"
        rows="5"
        #analysisBox
        placeholder="Enter your details."
        [(ngModel)]="analysisText"
      ></textarea>
      </div>
      <span style="display: flex;justify-content: space-between;">
          <button class="example-content" (click)="togglePopup()">
            👁 <span>Sample Intro</span>
          </button>
          <p>Count: {{ getCharacterCount(analysisText) }}</p>
      </span>
    </div>
  </div>
  <div style="display: flex; align-items: center; justify-content: center;margin-top: 3px;">
    <button class="analysis" (click)="analyseWithAi(analysisBox.value)">
      Fill Resume Details With AI &#10024;
    </button>
  </div>

  <span
    style="
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      margin-top: 3px;
    "
    >— or —</span
  >

  <div id="examplePopup" class="popup-box">
    <h4>Example Self Introduction</h4>
    <p>
      Hi, my name is Keerthi. I am a final-year B.Tech Computer Science student
      at ABC Engineering College with an overall percentage of 82%. I have a
      strong interest in web development and AI. You can reach me at
      <b>+91-9876543210</b>.
    </p>
    <button class="close-btn" (click)="togglePopup()">Close</button>
  </div>

  <div id="hintPopup" class="hint-popup-box">
    <h4>Hint/Tips</h4>
     <ul>
    <li>You can add your <b>Name & Address</b></li>
    <li><b>Education details</b> (College / School)</li>
    <li><b>Work / Internship experience</b></li>
    <li><b>Project details</b></li>
    <li><b>Personal details</b> (DOB, Gender, Father’s Name, Nationality, Marital Status, etc.)</li>
    <li><b>Contact details</b> (Mobile, Email, LinkedIn)</li>
    <li><b>Additional Courses / Certificate details</b></li>
    <li><b>Hobbies</b></li>
    <li><b>Skills / Alternate skills</b></li>
    <li><b>Known Technologies</b></li>
    <li><b>Type of Job searching</b></li>
    <li><b>Current / Preferred location</b></li>
    <li><b>Last designation</b></li>
    <li>Always add <b>duration</b> for Education / Work details</li>
  </ul>
    <button class="close-btn" (click)="hintPopup()">Close</button>
  </div>

  <div class="full-page-center">
    <div class="upload-container">
      <div class="upload-title">Upload Your Existing/Old Resume</div>
      <input
        type="file"
        #attachment
        style="display: none"
        (change)="addAttachment($event)"
        accept=".doc, .docx, .pdf"
      />
      <div class="upload-box">
        <p *ngIf="!resume?.fileName">Upload Your Old Resume Here</p>
        <button class="browse-btn" (click)="attachment.click()">
          Upload Resume
        </button>
        <div *ngIf="resume?.fileName" class="uploaded-file mt-3">
          <i class="pi pi-paperclip mr-2"></i>
          <span>{{ resume?.fileName }}</span>
        </div>
      </div>
    </div>
  </div>

  <span
    style="
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    "
    >— or —</span
  >

  <div style="display: flex; align-items: center; justify-content: center">
    <button
      class="enter-details"
      style="margin-top: 10px"
      (click)="enterDetails()"
    >
      Fill Details Yourself
    </button>
  </div>
</div>
